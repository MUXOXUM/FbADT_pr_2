# Инструкции по тестированию

## Запуск тестов

### User Service

```bash
cd service_users
npm install
npm test
```

Для запуска в режиме watch:
```bash
npm run test:watch
```

### Order Service

```bash
cd service_orders
npm install
npm test
```

Для запуска в режиме watch:
```bash
npm run test:watch
```

## Покрытие тестами

Тесты запускаются с флагом `--coverage`, что генерирует отчет о покрытии кода тестами. Отчет будет доступен в директории `coverage/` после запуска тестов.

## Описание тестов

### User Service Tests

1. **Успешная регистрация** - проверяет создание пользователя с валидными данными
2. **Повторная регистрация** - проверяет обработку дубликата email
3. **Вход с правильными данными** - проверяет выдачу JWT токена
4. **Доступ к защищённому пути без токена** - проверяет защиту маршрутов
5. **Получение и обновление профиля** - проверяет работу с профилем пользователя

### Order Service Tests

1. **Создание заказа** - проверяет создание заказа авторизованным пользователем
2. **Получение своего заказа** - проверяет доступ к собственным заказам
3. **Список заказов с пагинацией** - проверяет пагинацию и фильтрацию
4. **Попытка обновить чужой заказ** - проверяет контроль доступа
5. **Отмена собственного заказа** - проверяет отмену заказа и отсутствие побочных эффектов

## Структура тестов

Все тесты используют:
- `supertest` для HTTP запросов
- `jest` как тестовый фреймворк
- Моки для внешних зависимостей (axios для Order Service)
- Очистку базы данных перед каждым тестом

